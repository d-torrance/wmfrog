#!/usr/bin/make -f

PACKAGE = wmfrog
MAKEOPT = -C Src

export DEB_BUILD_MAINT_OPTIONS	= hardening=+all
CFLAGS	+= -Wall -pedantic $(CPPFLAGS)
LDFLAGS += -Wl,--as-needed

man:
	# convert *.pod to manual page
	$(MAKE) -C debian -f pod2man.mk PACKAGE=$(PACKAGE) makeman

override_dh_auto_build: man
	$(MAKE) $(MAKEOPT) CFLAGS="$(CFLAGS) $(LDFLAGS)"

override_dh_auto_clean:
	[ ! Src/Makefile ] || $(MAKE) $(MAKEOPT) clean

override_dh_auto_install:
	$(MAKE) $(MAKEOPT) install DESTDIR=$(CURDIR)/debian/wmfrog

%:
	dh $@

.PHONY = man

# End of file
